#----------------------------------------------------------------------
# handle unique junction loading and filtering
#----------------------------------------------------------------------

# app-specific junction loading
svPore_loadJunctions <- function(targetId){
    jxns <- readRDS(getSourceFilePath(targetId, "junctionClustersFile")) 
    jxns[, ":="(
        nSequenced = nInstances, # for nanopore, all junctions were sequenced (there are not junction in pair gaps)
        flankLength = alnSize,
        nLinkedJunctions = segmentClusterN
    )]
    jxns
}

# get a single junction to expand
svPore_getJunction <- function(x){
    svx_loadJunctions(x$targetId, svPore_loadJunctions)[clusterN == x$clusterN]
}

# Classes ‘data.table’ and 'data.frame':  573 obs. of  24 variables:
#  $ clusterN             : num  1 2 3 4 5 6 7 8 9 10 ...
#  $ edgeType             : chr  "T" "U" "U" "T" ...
#  $ eventSize            : int  0 29452 13327 0 24866 19341334 50911 16568 14245 
# 43384 ...
#  $ node1                :integer64 3117292070 1975519324 2109871901 2500825239 2
# 499679372 -2577192122 -246555908 -3117275502 ...
#  $ node2                :integer64 -1842733991 1975489872 2109858574 1797216211 
# 2499704238 -2557850788 246606819 -3117292070 ...
#  $ cChromIndex1         : int  11 12 13 16 16 17 1 25 2 3 ...
#  $ cChromIndex2         : int  25 12 13 10 16 17 1 25 2 3 ...
#  $ cStrand1             : int  1 1 1 1 1 1 -1 1 1 1 ...
#  $ cStrand2             : int  -1 1 1 1 1 1 1 1 1 1 ...
#  $ cRefPos1             : int  10594811 8252375 9280404 85752369 84606502 464475
# 44 246606819 16569 146553770 132788385 ...
#  $ cRefPos2             : int  16569 8222923 9267077 99835165 84631368 65788878 
# 246555908 1 146568015 132831769 ...
#  $ insertSize           : int  -56 -4 -8812 29 8 -1193 -420 0 -2 -2 ...
#  $ mapQ                 : int  60 60 60 60 60 60 60 60 60 60 ...
#  $ gapCompressedIdentity: num  0.951 0.984 0.973 0.987 0.997 ...
#  $ baseQual             : num  38.2 38 36.9 40.2 44.6 35.6 39 NA NA 44.5 ...    
#  $ alnBaseQual          : num  27.7 35.9 36.8 27.8 40.5 ...
#  $ alnSize              : int  208 822 13328 299 1165 2786 913 8257 1118 2851 ..
# .
#  $ samples              : chr  ",HCT_P24_rapid_102223," ",HCT_P24_rapid_102223,"
#  ",HCT_P24_rapid_102223," ",HCT_P24_rapid_102223," ...
#  $ nSamples             : int  1 1 1 1 1 1 1 1 1 1 ...
#  $ nInstances           : int  11 4 2 2 3 2 3 1707 2 3 ...
#  $ nCanonical           : int  4 2 2 2 1 1 1 1167 1 1 ...
#  $ nNonCanonical        : int  7 2 0 0 2 1 2 1068 1 2 ...
#  $ HCT_P24_rapid_102223 : int  11 4 2 2 3 2 3 1707 2 3 ...
#  $ segmentClusterN      : num  2 9 NA 6 8 NA 15 NA NA 3 ...
